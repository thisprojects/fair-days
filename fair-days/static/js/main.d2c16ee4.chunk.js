(this["webpackJsonpfair-days"]=this["webpackJsonpfair-days"]||[]).push([[0],{18:function(e,t,a){e.exports=a(30)},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(14),l=a.n(c),o=a(3),s=a.n(o),i=a(5),u=a(6),d=a(7),h=a(9),m=a(8),p=a(10),f=function(e){var t,a=new Date(1e3*e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],r=a.getDate(),c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()];return t=3==r||23==r?"rd":2==r||22==r?"nd":1==r||21==r||31==r?"st":"th","".concat(c," ").concat(r).concat(t," of ").concat(n)},v=a(4),E=a(15),y=function(e){var t=e.rainChance;return r.a.createElement("div",{className:"card-item"},r.a.createElement(v.c,{size:50}),r.a.createElement("p",null,(100*t).toFixed(),"% chance"))},g=function(e){var t=e.cloudCover;return r.a.createElement("div",{className:"card-item"},r.a.createElement(v.a,{size:50}),r.a.createElement("p",null,"Cover ",(100*t).toFixed(),"%"))},w=function(e){return e.isSunnyDay&&r.a.createElement("div",null,r.a.createElement(v.b,{color:"#f7b167",size:50}))},b=function(e){var t=e.high,a=e.low,n=function(e){return(e-32)/1.8};return r.a.createElement("div",{className:"card-item"},r.a.createElement(v.d,{size:50}),r.a.createElement("p",{className:"temperature-card-item"},n(a).toFixed()," - ",n(t).toFixed(),"\xb0c"))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fairDay,a=void 0===t?{}:t,n=e.shrinkSingleCard,c=a.cloudCover,l=a.precipProbability,o=a.summary,s=a.time,i=a.temperatureHigh,u=a.temperatureLow;return r.a.createElement("div",{className:"card",style:n?{maxWidth:"25%"}:null},r.a.createElement("p",null,f(s)),r.a.createElement(y,{rainChance:l}),r.a.createElement(g,{cloudCover:c}),r.a.createElement(b,{high:i,low:u}),r.a.createElement("p",{className:"card-item"},o),r.a.createElement(w,{isSunnyDay:c<.3}))},x=function(e){var t=e.goodWeatherDays;return t.length>0?r.a.createElement("div",{className:"weather-cards-wrapper"},t.map((function(e,a){return r.a.createElement(C,{key:a,fairDay:e,shrinkSingleCard:1==t.length})}))):r.a.createElement("div",{className:"tear"},r.a.createElement(E.a,{size:50,color:"grey"}))},S=function(e){return fetch("https://us-central1-nathan-downes-express-api.cloudfunctions.net/api/maps",{method:"POST",body:"".concat(e)}).then((function(e){return e.json()})).then((function(e){return{coords:e.results[0].geometry.location,address:e.results[0].formatted_address}}))},I=function(e){var t=e.lat,a=e.lng;return fetch("https://europe-west1-my-project-1501505786926.cloudfunctions.net/get-weather",{method:"POST",body:"".concat(t,",").concat(a)}).then((function(e){return e.json()})).then((function(e){return{daily:e.daily}}))},N=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,c,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return a=e.sent,n=a.coords,r=a.address,e.next=7,I(n);case 7:return c=e.sent,l=c.daily,o=(l=void 0===l?{}:l).data,e.abrupt("return",{address:r,forcasts:o});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=a(16),j=a(17),k=function(e){var t=e.duration,a=void 0===t?"0.1s":t,n=e.showComponent,c=e.children;return n&&r.a.createElement("div",{className:"fade-in",style:{animationDuration:"".concat(a)}},c)},D=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={invalidInput:!1,textInput:"Enter a City, Town or Postcode"},a.handleInputSubmit=function(e){e.preventDefault(),a.setState({invalidInput:!1});var t=a.state.textInput.replace(/[^\w\d]|\_/g,"");t.length>0?a.props.fetchWeather(t):a.setState({invalidInput:!0})},a.handleChange=function(e){a.setState({textInput:e.target.value})},a.clearInput=function(){a.setState({textInput:""})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"location-input"},r.a.createElement("form",null,r.a.createElement("label",null,r.a.createElement("input",{type:"text",onChange:this.handleChange,onFocus:this.clearInput,value:this.state.textInput}),r.a.createElement("button",{onClick:this.handleInputSubmit},"Search"),this.state.invalidInput&&r.a.createElement("p",{className:"invalid-input"},"Hmmm... have you entered a location?"))))}}]),t}(n.Component),W=function(){return r.a.createElement("div",{className:"intro"},r.a.createElement("h3",null,"The weather app that only shows you fair weather days. "),r.a.createElement("h4",null,"What are fair weather days? They have:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Under 25% chance of rain"),r.a.createElement("li",null,"Under 70% cloud cover"),r.a.createElement("li",null,"A temperature of over 10 degrees C")))},F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={cachedResults:{},currentResult:{},errors:!1,loading:!1},a.resultIsCached=function(e){return a.state.cachedResults[e]},a.fetchAndCacheWeatherForcast=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({errors:!1}),!a.resultIsCached(t)){e.next=5;break}a.setState({currentResult:a.state.cachedResults[t]}),e.next=10;break;case 5:return a.setState({loading:!0}),e.next=8,N(t).catch((function(){return a.setState({errors:!0})}));case 8:n=e.sent,a.setState((function(){return a.state.currentResult=a.state.cachedResults[t]=n,a.state.loading=!1}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=void 0!=this.state.currentResult&&this.state.currentResult,a=t.address,n=t.forcasts,c=void 0===n?[]:n,l=c.filter((function(e){return e.precipProbability<.25&&e.cloudCover<.7&&e.temperatureHigh>=49})),o=!c.length&&!this.state.loading&&!this.state.errors,s=c.length>0&&!this.state.loading&&!this.state.errors;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"title"},r.a.createElement("h1",{className:"fair-days"},"Fair Days"),r.a.createElement("span",null,"Weather Forcast")),r.a.createElement(D,{fetchWeather:this.fetchAndCacheWeatherForcast})),o&&r.a.createElement(W,null),r.a.createElement(k,{showComponent:this.state.loading,duration:"0.2s"},r.a.createElement((function(){return r.a.createElement("h2",null,r.a.createElement(O.a,{size:"2x",color:"gray",icon:j.a,pulse:!0}))}),null)),r.a.createElement(k,{duration:"1.0s",showComponent:s},r.a.createElement((function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Over the next 8 days there will be ",l.length," good weather days in ",a,"."))}),null),r.a.createElement(x,{goodWeatherDays:l})),r.a.createElement((function(){return e.state.errors&&r.a.createElement("div",{className:"errors"},r.a.createElement("p",null,"Whoops... Someting went wrong! Are you sure your location name is correct? Try again!"))}),null))}}]),t}(n.Component);a(29),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.d2c16ee4.chunk.js.map